<!DOCTYPE html>
<html lang="en">

<style> /* set the CSS */

.body{
  float:left;
}
.line_chart{
float:right;

}
.bar {
  fill: steelblue;
}
/* .bar:hover {
  fill: brown;
} */
.axis--x path {
  display: none;
}
.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 3px;
}
.circle {
  fill: red;
}

div.tooltip {
  position: absolute;
  text-align: center;
  width: 200px;
  height: 30px;
  padding: 2px;
  font: 12px sans-serif;
  background: lightsteelblue;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}



/*
	Generic Styling, for Desktops/Laptops
	*/
	table {
		width: 100%;
		border-collapse: collapse;
	}
	/* Zebra striping */
	tr:nth-of-type(odd) {
		background: #eee;
	}
	th {
		background: #333;
		color: white;
		font-weight: bold;
		cursor: s-resize;
		background-repeat: no-repeat;
        background-position: 3% center;
	}
	td, th {
		padding: 6px;
		border: 1px solid #ccc;
		text-align: left;
	}

	th.des:after {
      content: "\21E9";
    }

    th.aes:after {
      content: "\21E7";
    }

    /*
    	Max width before this PARTICULAR table gets nasty
    	This query will take effect for any screen smaller than 760px
    	and also iPads specifically.
    	*/
    	@media
    	only screen and (max-width: 760px),
    	(min-device-width: 768px) and (max-device-width: 1024px)  {

    		/* Force table to not be like tables anymore */
    		table, thead, tbody, th, td, tr {
    			display: block;
    		}

    		/* Hide table headers (but not display: none;, for accessibility) */
    		thead tr {
    			position: absolute;
    			top: -9999px;
    			left: -9999px;
    		}

    		tr { border: 1px solid #ccc; }

    		td {
    			/* Behave  like a "row" */
    			border: none;
    			border-bottom: 1px solid #eee;
    			position: relative;
    			padding-left: 50%;
    		}

    		td:before {
    			/* Now like a table header */
    			position: absolute;
    			/* Top/left values mimic padding */
    			top: 6px;
    			left: 6px;
    			width: 45%;
    			padding-right: 10px;
    			white-space: nowrap;
    		}

    		/*
    		Label the data
    		*/
    		td:before {
    		  content: attr(data-th) ": ";
              font-weight: bold;
              width: 6.5em;
              display: inline-block;
    		}
    	}

    	/* Smartphones (portrait and landscape) ----------- */
    	@media only screen
    	and (min-device-width : 320px)
    	and (max-device-width : 480px) {
    		body {
    			padding: 0;
    			margin: 0;
    			width: 320px; }
    		}

    	/* iPads (portrait and landscape) ----------- */
    	@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
    		body {
    			width: 495px;
    		}
    	}



</style>
<head>

  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<!-- load the d3.js library -->
<script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>

<h1 style="color:Tomato;"><center>USA Youtube Trending Video Statistics</center></h1>
<br>
<p>Dataset for this visualization is taken from <a href="https://www.kaggle.com/datasnaek/youtube-new">https://www.kaggle.com/datasnaek/youtube-new</a></p>
</br>
<p>YouTube (the world-famous video sharing website) maintains a list of the top trending videos on the platform based on various factors. Most important factor is user interaction which is the number of views each video has got.This is USA trending video dataset which has various details like number of views, trending date, videos category, channel and so on from November 2017 until April 2018</p>
<br>
<p>The bar chart below represents the total views received by all 16 cateories , this shows that news and politics is the most popular category in USA and Shows is the least popular category. Also on hovering on each bar it will show the total views received by each category</p>

<br>
<p> To learn more about these videos, we can select any category from the bar chart by clicking on the appropriate bar (only top 7 categories namely - News and Politics, Entertainment, Music, Gaming, People and Blogs, Comedy, Sports ) which will generate a line chart and a table</p>
<p>Line chart shows the trend for the views received by a particular category over months during which they went trending, This will help us to understand during which month a particular category videos went more trending. Like the line chart for category News and politics shows that videos related to news and politics were viewed the most and went trending more in the month of december. Also a tooltip has been enabled which shows the total views on a particular month for the selected category</p>
<br>
<p>Table shows the total views and top 3 tredning video's channels for every month for the selected category, these elements in the table can be sorted or reordered by clicking on any of the table headers as per users' priority</p>

  <script>

  $(document).ready(function() {
  // var d3 = require("d3"),
  //     jsdom = require("jsdom");
  // set the dimensions and margins of the graph
  var margin = {top: 20, right: 20, bottom: 160, left: 80},
      width = 750 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

  // set the ranges
  var x = d3.scaleBand()
            .range([0, width])
            .padding(0.1);
  var y = d3.scaleLinear()
            .range([height, 0]);

  // append the svg object to the body of the page
  // append a 'group' element to 'svg'
  // moves the 'group' element to the top left margin
  var svg = d3.select("#chart1").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

  var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

  // get the data
  d3.csv("USvids.csv", function(error, data) {
    if (error) throw error;

    // format the data
    data.forEach(function(d) {
      d.views = +d.views;
    });
  data.sort(function(a, b) {
    return d3.descending(a.views, b.views)
  });
    // Scale the range of the data in the domains
    x.domain(data.map(function(d) { return d.category; }));
    y.domain([0, d3.max(data, function(d) { return d.views; })]);

    // append the rectangles for the bar chart
    svg.selectAll("bar")
        .data(data)
      .enter().append("rect")
        .attr("class", "bar")
        .attr("x", function(d) { return x(d.category); })
        .attr("width", x.bandwidth())
        .attr("y", function(d) { return y(d.views); })
        .attr("height", function(d) { return height - y(d.views); })
        .on("mouseover", function(d) {
         div.transition()
           .duration(200)
           .style("opacity", .9);
         div.html("Category: "+d.category + "<br/>" + "Views: "+d.views)
           .style("left", (d3.event.pageX) + "px")
           .style("top", (d3.event.pageY-40) + "px");
         })
       .on("mouseout", function(d) {
         div.transition()
           .duration(500)
           .style("opacity", 0);
         })
        .on("click",function(d){
          //  document.getElementById(".line").innerHTML = "";
          $("#page-wrap").empty();
          switch(d.category) {
            case "Entertainment": entertainment_line_chart();entertainment_table();

          break;
          case "Comedy":comedy_line_chart();comedy_table();

          break;
          case "News and Politics":news_line_chart();news_table();

          break;
          case "Sports":sports_line_chart(); sports_table();
          break;

          case "Music":music_line_chart();music_table();

          break;
          case "Gaming":gaming_line_chart();gaming_table();

          break;
          case "People and Blogs":people_line_chart();people_table();

          break;
          break;
      default://construct_comedy_line_chart(d.category);

  }

  			//count=d["data"]["category"];
  			//console.log(value_of_change);
        //alert(d.category);

  			});

    //add title
    svg.append("text")
        .attr("x", (width / 2))
        .attr("y", (margin.top))
        .attr("text-anchor", "middle")
        .style("font-size", "20px")
        .style("text-decoration", "underline")
        .text("Categories vs Views");

    //add x label
    svg.append("text")      // text label for the x axis
        .attr("x", (width / 2))
        .attr("y",  (height+120))
        .style("font-size", "16px")
        .style("text-anchor", "middle")
        .text("Categories");

    //add y label
    svg.append("text")
        .attr("x", (margin.top-180))
        .attr("y",  (margin.left-150))
        .attr("transform", "rotate(-90)")
        .style("font-size", "16px")
        .style("text-anchor", "middle")
        .text("Views");

    // add the x Axis
    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        .selectAll("text")
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", ".15em")
        .attr("transform", "rotate(-65)");

    // add the y Axis
    svg.append("g")
        .call(d3.axisLeft(y));





  });





  // var margin = {top: 20, right: 80, bottom: 30, left: 20},
  //     width = 960 - margin.left - margin.right,
  //     height = 500 - margin.top - margin.bottom;

  function entertainment_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("entertainment.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });

       //add title
       g.append("text")
           .attr("x", (width / 2))
           .attr("y", (margin.top))
           .attr("text-anchor", "middle")
           .style("font-size", "20px")
           .style("text-decoration", "underline")
           .text("Months vs Views");

       //add x label
       g.append("text")      // text label for the x axis
           .attr("x", (width / 2))
           .attr("y",  (height+40))
           .style("font-size", "16px")
           .style("text-anchor", "middle")
           .text("Months");

       //add y label
       g.append("text")
           .attr("x", (margin.top-180))
           .attr("y",  (margin.left-150))
           .attr("transform", "rotate(-90)")
           .style("font-size", "16px")
           .style("text-anchor", "middle")
           .text("Views");

      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");
  });
  }



  function news_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("news.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });

       //add title
       g.append("text")
           .attr("x", (width / 2))
           .attr("y", (margin.top))
           .attr("text-anchor", "middle")
           .style("font-size", "20px")
           .style("text-decoration", "underline")
           .text("Months vs Views");

       //add x label
       g.append("text")      // text label for the x axis
           .attr("x", (width / 2))
           .attr("y",  (height+40))
           .style("font-size", "16px")
           .style("text-anchor", "middle")
           .text("Months");

       //add y label
       g.append("text")
           .attr("x", (margin.top-180))
           .attr("y",  (margin.left-150))
           .attr("transform", "rotate(-90)")
           .style("font-size", "16px")
           .style("text-anchor", "middle")
           .text("Views");

      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");
  });
  }


  function sports_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("sports.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);



    g.selectAll("circle1")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .style("pointer-events","visible")
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });
      // .on("click",function(d){
      //   var channelString = d.Channel;
      //   alert(channelString);
      //   sports_table(channelString);
      // });

      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");

      //add title
      g.append("text")
          .attr("x", (width / 2))
          .attr("y", (margin.top))
          .attr("text-anchor", "middle")
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .text("Months vs Views");

      //add x label
      g.append("text")      // text label for the x axis
          .attr("x", (width / 2))
          .attr("y",  (height+40))
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Months");

      //add y label
      g.append("text")
          .attr("x", (margin.top-180))
          .attr("y",  (margin.left-150))
          .attr("transform", "rotate(-90)")
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Views");


  });
  }

  // $(document).on("click",".circle_sports",function(){
  //
  //     alert("Clicked circle");
  //
  // });

  function music_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("music.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });


      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");

      //add title
      g.append("text")
          .attr("x", (width / 2))
          .attr("y", (margin.top))
          .attr("text-anchor", "middle")
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .text("Months vs Views");

      //add x label
      g.append("text")      // text label for the x axis
          .attr("x", (width / 2))
          .attr("y",  (height+40))
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Months");

      //add y label
      g.append("text")
          .attr("x", (margin.top-180))
          .attr("y",  (margin.left-150))
          .attr("transform", "rotate(-90)")
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Views");
  });
  }



  function gaming_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("gaming.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });


      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");

      //add title
      g.append("text")
          .attr("x", (width / 2))
          .attr("y", (margin.top))
          .attr("text-anchor", "middle")
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .text("Months vs Views");

      //add x label
      g.append("text")      // text label for the x axis
          .attr("x", (width / 2))
          .attr("y",  (height+40))
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Months");

      //add y label
      g.append("text")
          .attr("x", (margin.top-180))
          .attr("y",  (margin.left-150))
          .attr("transform", "rotate(-90)")
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Views");

  });
  }

  function people_line_chart() {

    $("#chart2").empty();
    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("#chart2").append("svg"),
  //     margin = {top: 100, right: 20, bottom: 30, left: 40},
  //         width = 960 - margin.left - margin.right,
  //         height = 500 - margin.top - margin.bottom;
      // width = +svg.attr("width") - margin.left - margin.right,
      // height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("people.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .call(d3.axisBottom(x))
        .attr("transform", "translate(0," + height + ")");

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
        // .append("text")
        // .attr("transform", "rotate(-90)")
        // .attr("y", 6)
        // .attr("dy", "0.71em")
        // .attr("text-anchor", "end")
        // .text("Frequency");
    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });


      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");

      //add title
      g.append("text")
          .attr("x", (width / 2))
          .attr("y", (margin.top))
          .attr("text-anchor", "middle")
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .text("Months vs Views");

      //add x label
      g.append("text")      // text label for the x axis
          .attr("x", (width / 2))
          .attr("y",  (height+40))
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Months");

      //add y label
      g.append("text")
          .attr("x", (margin.top-180))
          .attr("y",  (margin.left-150))
          .attr("transform", "rotate(-90)")
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Views");
  });
  }

  function comedy_line_chart() {

    $("#chart2").empty();

    var margin = {top: 20, right: 20, bottom: 160, left: 80},
        width = 750 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var svg = d3.select("#chart2").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom);
    var g = svg.append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");

  // var svg = d3.select("svg"),
  //     margin = {top: 20, right: 20, bottom: 30, left: 40},
  //     width = +svg.attr("width") - margin.left - margin.right,
  //     height = +svg.attr("height") - margin.top - margin.bottom;
  var x = d3.scaleBand().rangeRound([0, width]).padding(1.0),
      y = d3.scaleLinear().rangeRound([height, 0]);
  // var g = svg.append("g")
  //     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("comedy.csv", function(d) {
    d.Sales = +d.Sales;
    return d;
  }, function(error, data) {
    if (error) throw error;

    var line = d3.line()
      .x(function(d) { return x(d.Month); })
      .y(function(d) {  return y(d.Sales); })

    x.domain(data.map(function(d) { return d.Month; }));

    y.domain([0, d3.max(data, function(d) { return d.Sales; })]);
    g.append("g")
        .attr("class", "axis axis--x")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y));
      // .append("text")
      //   .attr("transform", "rotate(-90)")
      //   .attr("y", 6)
      //   .attr("dy", "0.71em")
      //   .attr("text-anchor", "end")
      //   .text("Frequency");

    var div = d3.select("body").append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);

    g.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("class", "circle")
      .attr("cx", function(d) { return x(d.Month); })
      .attr("cy", function(d) { return y(d.Sales); })
      .attr("r", 4)
      .on("mouseover", function(d) {
       div.transition()
         .duration(200)
         .style("opacity", .9);
       div.html("Month: "+d.Month + "<br/>" + "Views: "+d.Sales)
         .style("left", (d3.event.pageX) + "px")
         .style("top", (d3.event.pageY) + "px");
       })
     .on("mouseout", function(d) {
       div.transition()
         .duration(500)
         .style("opacity", 0);
       });


      g.append("line")
      .attr("x1", 0)
      .attr("y1", height)
      .attr("x2", width-margin.left)
      .attr("y2", height)
      .attr("stroke-width", 1)
      .attr("stroke", "black");

      //add title
      g.append("text")
          .attr("x", (width / 2))
          .attr("y", (margin.top))
          .attr("text-anchor", "middle")
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .text("Months vs Views");

      //add x label
      g.append("text")      // text label for the x axis
          .attr("x", (width / 2))
          .attr("y",  (height+40))
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Months");

      //add y label
      g.append("text")
          .attr("x", (margin.top-180))
          .attr("y",  (margin.left-150))
          .attr("transform", "rotate(-90)")
          .style("font-size", "16px")
          .style("text-anchor", "middle")
          .text("Views");

  });
  }

  function sports_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("sports.csv", function(error, data) {
		  if (error) throw error;

		  var sortAscending = true;
		  var table = d3.select('#page-wrap').append('table');
		  var titles = d3.keys(data[0]);
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
			                         return d;
                          };
		                    })
		                   .on('click', function (d) {
		                	   headers.attr('class', 'header');

		                	   if (sortAscending) {
		                	     rows.sort(function(a, b) { return b[d] < a[d]; });
		                	     sortAscending = false;
		                	     this.className = 'aes';
		                	   } else {
		                		 rows.sort(function(a, b) { return b[d] > a[d]; });
		                		 sortAscending = true;
		                		 this.className = 'des';
		                	   }

		                   });

		  var rows = table.append('tbody').selectAll('tr')
		               .data(data).enter()
		               .append('tr');
		  rows.selectAll('td')
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
		    .append('td')
		    .attr('data-th', function (d) {
		    	return d.name;
		    })
		    .text(function (d) {
		    	return d.value;
		    });
	  });

  }

  function entertainment_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("entertainment.csv", function(error, data) {
      if (error) throw error;

      var sortAscending = true;
      var table = d3.select('#page-wrap').append('table');
      var titles = d3.keys(data[0]);
      var headers = table.append('thead').append('tr')
                       .selectAll('th')
                       .data(titles).enter()
                       .append('th')
                       .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
                               return d;
                          };
                        })
                       .on('click', function (d) {
                         headers.attr('class', 'header');

                         if (sortAscending) {
                           rows.sort(function(a, b) { return b[d] < a[d]; });
                           sortAscending = false;
                           this.className = 'aes';
                         } else {
                         rows.sort(function(a, b) { return b[d] > a[d]; });
                         sortAscending = true;
                         this.className = 'des';
                         }

                       });

      var rows = table.append('tbody').selectAll('tr')
                   .data(data).enter()
                   .append('tr');
      rows.selectAll('td')
        .data(function (d) {
          return titles.map(function (k) {
            return { 'value': d[k], 'name': k};
          });
        }).enter()
        .append('td')
        .attr('data-th', function (d) {
          return d.name;
        })
        .text(function (d) {
          return d.value;
        });
    });

  }

  function news_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("news.csv", function(error, data) {
		  if (error) throw error;

		  var sortAscending = true;
		  var table = d3.select('#page-wrap').append('table');
		  var titles = d3.keys(data[0]);
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
			                         return d;
                          };
		                    })
		                   .on('click', function (d) {
		                	   headers.attr('class', 'header');

		                	   if (sortAscending) {
		                	     rows.sort(function(a, b) { return b[d] < a[d]; });
		                	     sortAscending = false;
		                	     this.className = 'aes';
		                	   } else {
		                		 rows.sort(function(a, b) { return b[d] > a[d]; });
		                		 sortAscending = true;
		                		 this.className = 'des';
		                	   }

		                   });

		  var rows = table.append('tbody').selectAll('tr')
		               .data(data).enter()
		               .append('tr');
		  rows.selectAll('td')
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
		    .append('td')
		    .attr('data-th', function (d) {
		    	return d.name;
		    })
		    .text(function (d) {
		    	return d.value;
		    });
	  });

  }


  function comedy_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("comedy.csv", function(error, data) {
      if (error) throw error;

      var sortAscending = true;
      var table = d3.select('#page-wrap').append('table');
      var titles = d3.keys(data[0]);
      var headers = table.append('thead').append('tr')
                       .selectAll('th')
                       .data(titles).enter()
                       .append('th')
                       .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
                               return d;
                          };
                        })
                       .on('click', function (d) {
                         headers.attr('class', 'header');

                         if (sortAscending) {
                           rows.sort(function(a, b) { return b[d] < a[d]; });
                           sortAscending = false;
                           this.className = 'aes';
                         } else {
                         rows.sort(function(a, b) { return b[d] > a[d]; });
                         sortAscending = true;
                         this.className = 'des';
                         }

                       });

      var rows = table.append('tbody').selectAll('tr')
                   .data(data).enter()
                   .append('tr');
      rows.selectAll('td')
        .data(function (d) {
          return titles.map(function (k) {
            return { 'value': d[k], 'name': k};
          });
        }).enter()
        .append('td')
        .attr('data-th', function (d) {
          return d.name;
        })
        .text(function (d) {
          return d.value;
        });
    });

  }


  function music_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("music.csv", function(error, data) {
		  if (error) throw error;

		  var sortAscending = true;
		  var table = d3.select('#page-wrap').append('table');
		  var titles = d3.keys(data[0]);
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
			                         return d;
                          };
		                    })
		                   .on('click', function (d) {
		                	   headers.attr('class', 'header');

		                	   if (sortAscending) {
		                	     rows.sort(function(a, b) { return b[d] < a[d]; });
		                	     sortAscending = false;
		                	     this.className = 'aes';
		                	   } else {
		                		 rows.sort(function(a, b) { return b[d] > a[d]; });
		                		 sortAscending = true;
		                		 this.className = 'des';
		                	   }

		                   });

		  var rows = table.append('tbody').selectAll('tr')
		               .data(data).enter()
		               .append('tr');
		  rows.selectAll('td')
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
		    .append('td')
		    .attr('data-th', function (d) {
		    	return d.name;
		    })
		    .text(function (d) {
		    	return d.value;
		    });
	  });

  }

  function gaming_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("gaming.csv", function(error, data) {
		  if (error) throw error;

		  var sortAscending = true;
		  var table = d3.select('#page-wrap').append('table');
		  var titles = d3.keys(data[0]);
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
			                         return d;
                          };
		                    })
		                   .on('click', function (d) {
		                	   headers.attr('class', 'header');

		                	   if (sortAscending) {
		                	     rows.sort(function(a, b) { return b[d] < a[d]; });
		                	     sortAscending = false;
		                	     this.className = 'aes';
		                	   } else {
		                		 rows.sort(function(a, b) { return b[d] > a[d]; });
		                		 sortAscending = true;
		                		 this.className = 'des';
		                	   }

		                   });

		  var rows = table.append('tbody').selectAll('tr')
		               .data(data).enter()
		               .append('tr');
		  rows.selectAll('td')
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
		    .append('td')
		    .attr('data-th', function (d) {
		    	return d.name;
		    })
		    .text(function (d) {
		    	return d.value;
		    });
	  });

  }

  function people_table() {
    // var channels = str.split('-');
    // console.log(channels);
    d3.csv("people.csv", function(error, data) {
		  if (error) throw error;

		  var sortAscending = true;
		  var table = d3.select('#page-wrap').append('table');
		  var titles = d3.keys(data[0]);
		  var headers = table.append('thead').append('tr')
		                   .selectAll('th')
		                   .data(titles).enter()
		                   .append('th')
		                   .text(function (d) {
                          if (d == "Sales") {
                            return "Views";
                          } else {
			                         return d;
                          };
		                    })
		                   .on('click', function (d) {
		                	   headers.attr('class', 'header');

		                	   if (sortAscending) {
		                	     rows.sort(function(a, b) { return b[d] < a[d]; });
		                	     sortAscending = false;
		                	     this.className = 'aes';
		                	   } else {
		                		 rows.sort(function(a, b) { return b[d] > a[d]; });
		                		 sortAscending = true;
		                		 this.className = 'des';
		                	   }

		                   });

		  var rows = table.append('tbody').selectAll('tr')
		               .data(data).enter()
		               .append('tr');
		  rows.selectAll('td')
		    .data(function (d) {
		    	return titles.map(function (k) {
		    		return { 'value': d[k], 'name': k};
		    	});
		    }).enter()
		    .append('td')
		    .attr('data-th', function (d) {
		    	return d.name;
		    })
		    .text(function (d) {
		    	return d.value;
		    });
	  });

  }

  });

  </script>



<div class="container-fluid">
<div class="row">
  <div class="col-6">
  <div class="row">
  <div class="col-12" id="chart1">

  </div>
</div>
  <div class="row">
    <div class="col-12" id="page-wrap">

    </div>
  </div>
</div>
  <div class="col-6 mx-auto  my-auto" id="chart2">
  </div>
</div>

</div>

<!--<div class="line_chart">

</div>
<div class="bar_chart">

</div>-->
<br>
<br>
<p>After views the above graphs, the user should be able to understand the distribution of views among the 16 categories and understand the trend of trending videos for every selected category over the month during which they went trending and also get an idea about the top trending channels for each category on a monthly basis</p>

</body>
</html>
